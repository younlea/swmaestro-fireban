{"ast":null,"code":"import _regeneratorRuntime from\"/home/webmaster/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/webmaster/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _taggedTemplateLiteral from\"/home/webmaster/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 100vw;\\n  height: 100vh;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useEffect,useCallback}from\"react\";import NotFound from\"./NotFound\";import Login from\"../components/Auth/Login\";import Template from\"../components/Auth/Template\";import styled from\"styled-components\";import Register from\"../components/Auth/Register\";import{useSelector,useDispatch}from\"react-redux\";import{initialState,changeField,userLogin,userRegister}from\"../store/modules/auth\";import{useHistory}from\"react-router-dom\";var Container=styled.div(_templateObject());function AuthContainer(_ref){var match=_ref.match;var dispatch=useDispatch();var history=useHistory();var token=useSelector(function(state){return state.auth.token||initialState.token;});useEffect(function(){if(token){window.location.reload();}},[token]);var loginForm=useSelector(function(state){return state.auth.login;});var registerForm=useSelector(function(state){return state.auth.register;});var loginLoading=useSelector(function(state){return state.loading[\"auth/LOGIN\"];});var registerLoading=useSelector(function(state){return state.loading[\"auth/REGISTER\"];});var error=useSelector(function(state){return state.auth.error||initialState.error;});var onLoginChange=function onLoginChange(e){//input change\nvar _e$target=e.target,name=_e$target.name,value=_e$target.value;dispatch(changeField({form:\"login\",key:name,value:value}));};var onRegisterChange=function onRegisterChange(e){//input change\nvar _e$target2=e.target,name=_e$target2.name,value=_e$target2.value;dispatch(changeField({form:\"register\",key:name,value:value}));};var loginSubmit=useCallback(/*#__PURE__*/ //submit\nfunction(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();try{dispatch(userLogin(loginForm));// dispatch(getUserInfo());\n}catch(e){}case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}(),[dispatch,loginForm]);var registerSubmit=useCallback(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();try{dispatch(userRegister(registerForm));}catch(e){}case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}(),[dispatch,registerForm]);var goRegister=function goRegister(e){e.preventDefault();history.push(\"/auth/register\");};var goLogin=function goLogin(e){e.preventDefault();history.push(\"/auth/login\");};var path=match.params.sub;switch(path){case\"login\":return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Template,null,/*#__PURE__*/React.createElement(Login,{loading:loginLoading,error:error,onChange:onLoginChange,submit:loginSubmit,form:loginForm,goRegister:goRegister})));case\"register\":return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Template,null,/*#__PURE__*/React.createElement(Register,{loading:registerLoading,error:error,onChange:onRegisterChange,submit:registerSubmit,form:registerForm,goLogin:goLogin})));default:return/*#__PURE__*/React.createElement(NotFound,null);}}export default AuthContainer;","map":{"version":3,"sources":["/home/webmaster/front/src/containers/AuthContainer.js"],"names":["React","useEffect","useCallback","NotFound","Login","Template","styled","Register","useSelector","useDispatch","initialState","changeField","userLogin","userRegister","useHistory","Container","div","AuthContainer","match","dispatch","history","token","state","auth","window","location","reload","loginForm","login","registerForm","register","loginLoading","loading","registerLoading","error","onLoginChange","e","target","name","value","form","key","onRegisterChange","loginSubmit","preventDefault","registerSubmit","goRegister","push","goLogin","path","params","sub"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback } from \"react\";\nimport NotFound from \"./NotFound\";\nimport Login from \"../components/Auth/Login\";\nimport Template from \"../components/Auth/Template\";\nimport styled from \"styled-components\";\nimport Register from \"../components/Auth/Register\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  initialState,\n  changeField,\n  userLogin,\n  userRegister\n} from \"../store/modules/auth\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Container = styled.div`\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nfunction AuthContainer({ match }) {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const token = useSelector(state => state.auth.token || initialState.token);\n  useEffect(() => {\n    if (token) {\n      window.location.reload();\n    }\n  }, [token]);\n\n  const loginForm = useSelector(state => state.auth.login);\n  const registerForm = useSelector(state => state.auth.register);\n\n  const loginLoading = useSelector(state => state.loading[\"auth/LOGIN\"]);\n  const registerLoading = useSelector(state => state.loading[\"auth/REGISTER\"]);\n\n  const error = useSelector(state => state.auth.error || initialState.error);\n\n  const onLoginChange = e => {\n    //input change\n    const { name, value } = e.target;\n    dispatch(\n      changeField({\n        form: \"login\",\n        key: name,\n        value: value\n      })\n    );\n  };\n\n  const onRegisterChange = e => {\n    //input change\n    const { name, value } = e.target;\n    dispatch(\n      changeField({\n        form: \"register\",\n        key: name,\n        value: value\n      })\n    );\n  };\n\n  const loginSubmit = useCallback(\n    //submit\n    async e => {\n      e.preventDefault();\n      try {\n        dispatch(userLogin(loginForm));\n        // dispatch(getUserInfo());\n      } catch (e) {}\n    },\n    [dispatch, loginForm]\n  );\n\n  const registerSubmit = useCallback(\n    async e => {\n      e.preventDefault();\n      try {\n        dispatch(userRegister(registerForm));\n      } catch (e) {}\n    },\n    [dispatch, registerForm]\n  );\n\n  const goRegister = e => {\n    e.preventDefault();\n    history.push(\"/auth/register\");\n  };\n  const goLogin = e => {\n    e.preventDefault();\n    history.push(\"/auth/login\");\n  };\n\n  const path = match.params.sub;\n\n  switch (path) {\n    case \"login\":\n      return (\n        <Container>\n          <Template>\n            <Login\n              loading={loginLoading}\n              error={error}\n              onChange={onLoginChange}\n              submit={loginSubmit}\n              form={loginForm}\n              goRegister={goRegister}\n            ></Login>\n          </Template>\n        </Container>\n      );\n\n    case \"register\":\n      return (\n        <Container>\n          <Template>\n            <Register\n              loading={registerLoading}\n              error={error}\n              onChange={onRegisterChange}\n              submit={registerSubmit}\n              form={registerForm}\n              goLogin={goLogin}\n            ></Register>\n          </Template>\n        </Container>\n      );\n\n    default:\n      return <NotFound></NotFound>;\n  }\n}\n\nexport default AuthContainer;\n"]},"metadata":{},"sourceType":"module"}