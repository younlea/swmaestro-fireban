{"ast":null,"code":"import _slicedToArray from\"/home/webmaster/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Sidebar from\"../components/Sidebar/Sidebar.js\";import Navbar from\"../components/NavBar/Navbar.js\";import PerfectScrollbar from\"perfect-scrollbar\";import{makeStyles}from\"@material-ui/core/styles\";import StreamPlayer from\"../components/Stream/StreamPlayer.js\";import styles from\"../assets/jss/material-dashboard-react/layouts/adminStyle.js\";import InfoContainer from\"./Stream/InfoContainer.js\";import{useHistory}from\"react-router-dom\";var ps;function MainContainer(_ref){var match=_ref.match;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),mobileOpen=_useState2[0],setMobileOpen=_useState2[1];var mainPanel=React.createRef();var useStyles=makeStyles(styles);var history=useHistory();var classes=useStyles();console.log(match.path);var handleDrawerToggle=function handleDrawerToggle(){setMobileOpen(!mobileOpen);};var resizeFunction=function resizeFunction(){if(window.innerWidth>=960){setMobileOpen(false);}};var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),streamUrl=_useState4[0],setStreamUrl=_useState4[1];var onStream=function onStream(e){e.preventDefault();var target=e.target.dataset.index;var isActive=e.target.dataset.active;if(isActive===\"true\"){setStreamUrl(target);history.push(\"/stream\");}else{}};useEffect(function(){if(navigator.platform.indexOf(\"Win\")>-1){ps=new PerfectScrollbar(mainPanel.current,{suppressScrollX:true,suppressScrollY:false});document.body.style.overflow=\"hidden\";}window.addEventListener(\"resize\",resizeFunction);// Specify how to clean up after this effect:\nreturn function cleanup(){if(navigator.platform.indexOf(\"Win\")>-1){ps.destroy();}window.removeEventListener(\"resize\",resizeFunction);};},[mainPanel]);return/*#__PURE__*/React.createElement(\"div\",{className:classes.wrapper},/*#__PURE__*/React.createElement(Sidebar,{logoText:\"userid\",handleDrawerToggle:handleDrawerToggle,open:mobileOpen,color:\"red\"}),/*#__PURE__*/React.createElement(\"div\",{className:classes.mainPanel,ref:mainPanel},/*#__PURE__*/React.createElement(Navbar,{handleDrawerToggle:handleDrawerToggle}),/*#__PURE__*/React.createElement(\"div\",{className:classes.content},/*#__PURE__*/React.createElement(\"div\",{className:classes.container},match.path===\"/stream\"?/*#__PURE__*/React.createElement(StreamPlayer,{streamUrl:streamUrl}):/*#__PURE__*/React.createElement(InfoContainer,{onStream:onStream})))));}export default MainContainer;","map":{"version":3,"sources":["/home/webmaster/front/src/containers/MainContainer.js"],"names":["React","useState","useEffect","Sidebar","Navbar","PerfectScrollbar","makeStyles","StreamPlayer","styles","InfoContainer","useHistory","ps","MainContainer","match","mobileOpen","setMobileOpen","mainPanel","createRef","useStyles","history","classes","console","log","path","handleDrawerToggle","resizeFunction","window","innerWidth","streamUrl","setStreamUrl","onStream","e","preventDefault","target","dataset","index","isActive","active","push","navigator","platform","indexOf","current","suppressScrollX","suppressScrollY","document","body","style","overflow","addEventListener","cleanup","destroy","removeEventListener","wrapper","content","container"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Sidebar from \"../components/Sidebar/Sidebar.js\";\nimport Navbar from \"../components/NavBar/Navbar.js\";\nimport PerfectScrollbar from \"perfect-scrollbar\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport StreamPlayer from \"../components/Stream/StreamPlayer.js\";\nimport styles from \"../assets/jss/material-dashboard-react/layouts/adminStyle.js\";\nimport InfoContainer from \"./Stream/InfoContainer.js\";\nimport { useHistory } from \"react-router-dom\";\n\nlet ps;\n\nfunction MainContainer({ match }) {\n  const [mobileOpen, setMobileOpen] = useState(false);\n  const mainPanel = React.createRef();\n  const useStyles = makeStyles(styles);\n  const history = useHistory();\n  const classes = useStyles();\n  console.log(match.path);\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  const resizeFunction = () => {\n    if (window.innerWidth >= 960) {\n      setMobileOpen(false);\n    }\n  };\n\n  const [streamUrl, setStreamUrl] = useState(null);\n\n  const onStream = e => {\n    e.preventDefault();\n    const target = e.target.dataset.index;\n    const isActive = e.target.dataset.active;\n\n    if (isActive === \"true\") {\n      setStreamUrl(target);\n\n      history.push(\"/stream\");\n    } else {\n    }\n  };\n\n  useEffect(() => {\n    if (navigator.platform.indexOf(\"Win\") > -1) {\n      ps = new PerfectScrollbar(mainPanel.current, {\n        suppressScrollX: true,\n        suppressScrollY: false\n      });\n      document.body.style.overflow = \"hidden\";\n    }\n    window.addEventListener(\"resize\", resizeFunction);\n    // Specify how to clean up after this effect:\n    return function cleanup() {\n      if (navigator.platform.indexOf(\"Win\") > -1) {\n        ps.destroy();\n      }\n      window.removeEventListener(\"resize\", resizeFunction);\n    };\n  }, [mainPanel]);\n\n  return (\n    <div className={classes.wrapper}>\n      <Sidebar\n        logoText=\"userid\"\n        handleDrawerToggle={handleDrawerToggle}\n        open={mobileOpen}\n        color=\"red\"\n      />\n      <div className={classes.mainPanel} ref={mainPanel}>\n        <Navbar handleDrawerToggle={handleDrawerToggle} />\n        <div className={classes.content}>\n          <div className={classes.container}>\n            {match.path === \"/stream\" ? (\n              <StreamPlayer streamUrl={streamUrl}></StreamPlayer>\n            ) : (\n              <InfoContainer onStream={onStream}></InfoContainer>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default MainContainer;\n"]},"metadata":{},"sourceType":"module"}