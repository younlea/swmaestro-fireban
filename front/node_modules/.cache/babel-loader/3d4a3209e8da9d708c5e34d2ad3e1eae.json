{"ast":null,"code":"import _defineProperty from\"/home/webmaster/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/webmaster/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/webmaster/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/home/webmaster/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _handleActions;var _marked=/*#__PURE__*/_regeneratorRuntime.mark(detectSaga);import{createAction,handleActions}from\"redux-actions\";import{takeLatest}from\"redux-saga/effects\";import createRequestSaga,{createRequestActionTypes}from\"../../lib/createRequestSaga\";import*as detectAPI from\"../../lib/api/detect\";var _createRequestActionT=createRequestActionTypes(\"detect/GET_DETECT_INFO\"),_createRequestActionT2=_slicedToArray(_createRequestActionT,3),GET_DETECT_INFO=_createRequestActionT2[0],GET_DETECT_INFO_SUCCESS=_createRequestActionT2[1],GET_DETECT_INFO_FAILURE=_createRequestActionT2[2];var _createRequestActionT3=createRequestActionTypes(\"detect/GET_DETECT_INFO_MORE\"),_createRequestActionT4=_slicedToArray(_createRequestActionT3,3),GET_DETECT_INFO_MORE=_createRequestActionT4[0],GET_DETECT_INFO_MORE_SUCCESS=_createRequestActionT4[1],GET_DETECT_INFO_MORE_FAILURE=_createRequestActionT4[2];var _createRequestActionT5=createRequestActionTypes(\"detect/GET_DETECT_DETAIL\"),_createRequestActionT6=_slicedToArray(_createRequestActionT5,3),GET_DETECT_DETAIL=_createRequestActionT6[0],GET_DETECT_DETAIL_SUCCESS=_createRequestActionT6[1],GET_DETECT_DETAIL_FAILURE=_createRequestActionT6[2];var CHANGE_DETECT_INFO=\"detect/CHANGE_DETECT_INFO\";var DELETE_DETECT_INFO=\"detect/DELETE_DETECT_INFO\";var _detectUPDATE_DETECT=\"detect/UPDATE_DETECT\",_detectUPDATE_DETECT2=_slicedToArray(_detectUPDATE_DETECT,3),UPDATE_DETECT=_detectUPDATE_DETECT2[0],UPDATE_DETECT_SUCCESS=_detectUPDATE_DETECT2[1],UPDATE_DETECT_FAILURE=_detectUPDATE_DETECT2[2];export var changeDetectInfo=createAction(CHANGE_DETECT_INFO,function(target){return target;});export var deleteDetectInfo=createAction(DELETE_DETECT_INFO,function(target){return target;});export var getDetectInfo=createAction(GET_DETECT_INFO,function(page){return page;});export var getDetectInfoMore=createAction(GET_DETECT_INFO_MORE,function(page){return page;});export var getDetectDetail=createAction(GET_DETECT_DETAIL,function(target){return target;});var getDetectInfoSaga=createRequestSaga(GET_DETECT_INFO,detectAPI.getDetectInfoList);var getDetectInfoMoreSaga=createRequestSaga(GET_DETECT_INFO_MORE,detectAPI.getDetectInfoList);var getDetectDetailSaga=createRequestSaga(GET_DETECT_DETAIL,detectAPI.getDetectInfoDetail);export function detectSaga(){return _regeneratorRuntime.wrap(function detectSaga$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return takeLatest(GET_DETECT_INFO,getDetectInfoSaga);case 2:_context.next=4;return takeLatest(GET_DETECT_DETAIL,getDetectDetailSaga);case 4:_context.next=6;return takeLatest(GET_DETECT_INFO_MORE,getDetectInfoMoreSaga);case 6:case\"end\":return _context.stop();}}},_marked);}export var initialState={imageList:null,error:{type:null,description:null},targetImage:null,targetDetectInfo:null,gpsInfo:\"\",page:1};var detect=handleActions((_handleActions={},_defineProperty(_handleActions,CHANGE_DETECT_INFO,function(state,_ref){var target=_ref.payload;return _objectSpread({},state,{targetDetectInfo:state.targetDetectInfo.map(function(item){return item.id===target.id?item=target:item;})});}),_defineProperty(_handleActions,DELETE_DETECT_INFO,function(state,_ref2){var target=_ref2.payload;return _objectSpread({},state,{targetDetectInfo:state.targetDetectInfo.filter(function(item){return item.id!==target;})});}),_defineProperty(_handleActions,GET_DETECT_INFO_SUCCESS,function(state,_ref3){var data=_ref3.payload;return _objectSpread({},state,{imageList:data.message,page:data.page,error:initialState.error});}),_defineProperty(_handleActions,GET_DETECT_INFO_FAILURE,function(state,_ref4){var error=_ref4.payload;return _objectSpread({},state,{imageList:initialState.imageList,error:{type:\"detectInfo\",description:error}});}),_defineProperty(_handleActions,GET_DETECT_DETAIL_SUCCESS,function(state,_ref5){var data=_ref5.payload;return _objectSpread({},state,{targetImage:data.message,targetDetectInfo:data.message.target_detection,error:initialState.error});}),_defineProperty(_handleActions,GET_DETECT_DETAIL_FAILURE,function(state,_ref6){var error=_ref6.payload;return _objectSpread({},state,{targetImage:initialState.targetImage,error:{type:\"detectDetail\",description:error}});}),_defineProperty(_handleActions,GET_DETECT_INFO_MORE_SUCCESS,function(state,_ref7){var data=_ref7.payload;return _objectSpread({},state,{imageList:state.imageList.concat(data.message),page:data.page,error:initialState.error});}),_defineProperty(_handleActions,GET_DETECT_INFO_MORE_FAILURE,function(state,_ref8){var error=_ref8.payload;return _objectSpread({},state,{error:{type:\"detectInfoMore\",description:error}});}),_handleActions),initialState);export default detect;","map":{"version":3,"sources":["/home/webmaster/front/src/store/modules/detect.js"],"names":["detectSaga","createAction","handleActions","takeLatest","createRequestSaga","createRequestActionTypes","detectAPI","GET_DETECT_INFO","GET_DETECT_INFO_SUCCESS","GET_DETECT_INFO_FAILURE","GET_DETECT_INFO_MORE","GET_DETECT_INFO_MORE_SUCCESS","GET_DETECT_INFO_MORE_FAILURE","GET_DETECT_DETAIL","GET_DETECT_DETAIL_SUCCESS","GET_DETECT_DETAIL_FAILURE","CHANGE_DETECT_INFO","DELETE_DETECT_INFO","UPDATE_DETECT","UPDATE_DETECT_SUCCESS","UPDATE_DETECT_FAILURE","changeDetectInfo","target","deleteDetectInfo","getDetectInfo","page","getDetectInfoMore","getDetectDetail","getDetectInfoSaga","getDetectInfoList","getDetectInfoMoreSaga","getDetectDetailSaga","getDetectInfoDetail","initialState","imageList","error","type","description","targetImage","targetDetectInfo","gpsInfo","detect","state","payload","map","item","id","filter","data","message","target_detection","concat"],"mappings":"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","sourcesContent":["import { createAction, handleActions } from \"redux-actions\";\nimport { takeLatest } from \"redux-saga/effects\";\nimport createRequestSaga, {\n  createRequestActionTypes\n} from \"../../lib/createRequestSaga\";\nimport * as detectAPI from \"../../lib/api/detect\";\n\nconst [\n  GET_DETECT_INFO,\n  GET_DETECT_INFO_SUCCESS,\n  GET_DETECT_INFO_FAILURE\n] = createRequestActionTypes(\"detect/GET_DETECT_INFO\");\n\n\n\nconst [\n  GET_DETECT_INFO_MORE,\n  GET_DETECT_INFO_MORE_SUCCESS,\n  GET_DETECT_INFO_MORE_FAILURE\n] = createRequestActionTypes(\"detect/GET_DETECT_INFO_MORE\");\n\nconst [\n  GET_DETECT_DETAIL,\n  GET_DETECT_DETAIL_SUCCESS,\n  GET_DETECT_DETAIL_FAILURE\n] = createRequestActionTypes(\"detect/GET_DETECT_DETAIL\");\n\n\nconst CHANGE_DETECT_INFO = \"detect/CHANGE_DETECT_INFO\"\nconst DELETE_DETECT_INFO = \"detect/DELETE_DETECT_INFO\"\nconst [UPDATE_DETECT, UPDATE_DETECT_SUCCESS, UPDATE_DETECT_FAILURE] = \"detect/UPDATE_DETECT\"\n\n\nexport const changeDetectInfo = createAction(CHANGE_DETECT_INFO, (target) => (target))\n\nexport const deleteDetectInfo = createAction(DELETE_DETECT_INFO, (target) => (target))\n\nexport const getDetectInfo = createAction(GET_DETECT_INFO, (page) => (page));\n\nexport const getDetectInfoMore = createAction(GET_DETECT_INFO_MORE, (page) => (page));\n\nexport const getDetectDetail = createAction(\n  GET_DETECT_DETAIL,\n  target => target\n);\n\nconst getDetectInfoSaga = createRequestSaga(\n  GET_DETECT_INFO,\n  detectAPI.getDetectInfoList\n);\n\nconst getDetectInfoMoreSaga = createRequestSaga(\n  GET_DETECT_INFO_MORE,\n  detectAPI.getDetectInfoList\n);\n\nconst getDetectDetailSaga = createRequestSaga(\n  GET_DETECT_DETAIL,\n  detectAPI.getDetectInfoDetail\n);\n\nexport function* detectSaga() {\n  yield takeLatest(GET_DETECT_INFO, getDetectInfoSaga);\n  yield takeLatest(GET_DETECT_DETAIL, getDetectDetailSaga);\n  yield takeLatest(GET_DETECT_INFO_MORE, getDetectInfoMoreSaga);\n}\n\nexport const initialState = {\n  imageList: null,\n  error: {\n    type: null,\n    description: null\n  },\n  targetImage: null,\n  targetDetectInfo: null,\n  gpsInfo: \"\",\n  page:1\n};\n\nconst detect = handleActions(\n  {\n\n    [CHANGE_DETECT_INFO]: (state, {payload: target}) => ({\n      ...state,\n      targetDetectInfo: state.targetDetectInfo.map((item) => (\n        item.id === target.id ? item = target : item\n      ) )\n    }),\n\n    [DELETE_DETECT_INFO]: (state, {payload: target}) => ({\n      ...state,\n      targetDetectInfo: state.targetDetectInfo.filter(item => item.id !== target)\n       \n    }),\n    [GET_DETECT_INFO_SUCCESS]: (state, { payload: data }) => ({\n      ...state,\n      imageList: data.message,\n      page:data.page,\n      error: initialState.error\n    }),\n    [GET_DETECT_INFO_FAILURE]: (state, { payload: error }) => ({\n      ...state,\n      imageList: initialState.imageList,\n      error: { type: \"detectInfo\", description: error }\n    }),\n    [GET_DETECT_DETAIL_SUCCESS]: (state, { payload: data }) => ({\n      ...state,\n      targetImage: data.message,\n      targetDetectInfo: data.message.target_detection,\n      error: initialState.error\n    }),\n    [GET_DETECT_DETAIL_FAILURE]: (state, { payload: error }) => ({\n      ...state,\n      targetImage: initialState.targetImage,\n      error: { type: \"detectDetail\", description: error }\n    }),\n    [GET_DETECT_INFO_MORE_SUCCESS]: (state, { payload: data }) => ({\n      ...state,\n      imageList: state.imageList.concat(data.message),\n      page:data.page,\n      error: initialState.error      \n    }),\n    [GET_DETECT_INFO_MORE_FAILURE]: (state, { payload: error }) => ({\n      ...state,\n      error: { type: \"detectInfoMore\", description: error }\n    }),\n  },\n  initialState\n);\n\nexport default detect;\n"]},"metadata":{},"sourceType":"module"}