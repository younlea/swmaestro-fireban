{"ast":null,"code":"import _regeneratorRuntime from\"/home/webmaster/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/webmaster/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useCallback}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import styles from\"../assets/jss/material-dashboard-react/layouts/adminStyle.js\";import InfoContainer from\"./Stream/InfoContainer.js\";import{useHistory}from\"react-router-dom\";import SidebarContainer from\"./SidebarContainer.js\";import NavbarContainer from\"./NavbarContainer.js\";import{gpsInfo}from\"../lib/api/stream.js\";import{accessClient}from\"../lib/api/client.js\";function MainContainer(_ref){var match=_ref.match;var mainPanel=React.createRef();var useStyles=makeStyles(styles);var classes=useStyles();var history=useHistory();// function func2(parent_func) {\n//   return new Promise((resolve, reject) => {\n//       axios.get('http://www.daum.net/').then((result) => {\n//           console.log('function2 routine**********');\n//           console.log(parent_func);\n//           resolve('function2에서 왔습니다.');\n//       });\n//   });\n// }\nvar onStream=useCallback(/*#__PURE__*/ //submit\nfunction(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var gpsInfo,target,isActive;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();gpsInfo=function gpsInfo(stream_key){return accessClient.post(\"/stream/check\",{stream_key:stream_key});};try{target=e.currentTarget.dataset.index;isActive=e.currentTarget.dataset.active;if(isActive===\"true\"){gpsInfo(target).then(function(result){console.log(result.status);if(result.status!==200){alert(\"잠시 후 다시 시도해주세요.\");}else{history.push(\"/stream/\"+target);}}).catch(function(e){alert(\"잠시 후 다시 시도해주세요.\");});}else{alert(\"스트리밍 중이 아닙니다.\");}}catch(e){alert(\"잠시 후 다시 시도해주세요.\");}case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}(),[history]);// const onStream = e => {\n//   e.preventDefault();\n//   const target = e.currentTarget.dataset.index;\n//   const isActive = e.currentTarget.dataset.active;\n//   const test = gpsInfo(target);\n//   console.log(test);\n//   if (isActive === \"true\") {\n//     // history.push(\"/stream/\" + target);\n//   } else {\n//   }\n// };\nreturn/*#__PURE__*/React.createElement(\"div\",{className:classes.wrapper},/*#__PURE__*/React.createElement(SidebarContainer,null),/*#__PURE__*/React.createElement(\"div\",{className:classes.mainPanel,ref:mainPanel},/*#__PURE__*/React.createElement(NavbarContainer,null),/*#__PURE__*/React.createElement(\"div\",{className:classes.content},/*#__PURE__*/React.createElement(InfoContainer,{onStream:onStream}))));}export default MainContainer;","map":{"version":3,"sources":["/home/webmaster/front/src/containers/MainContainer.js"],"names":["React","useCallback","makeStyles","styles","InfoContainer","useHistory","SidebarContainer","NavbarContainer","gpsInfo","accessClient","MainContainer","match","mainPanel","createRef","useStyles","classes","history","onStream","e","preventDefault","stream_key","post","target","currentTarget","dataset","index","isActive","active","then","result","console","log","status","alert","push","catch","wrapper","content"],"mappings":"qRAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,KAAmC,OAAnC,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,8DAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,2BAA1B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,uBAA7B,CACA,MAAOC,CAAAA,eAAP,KAA4B,sBAA5B,CACA,OAASC,OAAT,KAAwB,sBAAxB,CACA,OAASC,YAAT,KAA6B,sBAA7B,CAEA,QAASC,CAAAA,aAAT,MAAkC,IAATC,CAAAA,KAAS,MAATA,KAAS,CAChC,GAAMC,CAAAA,SAAS,CAAGZ,KAAK,CAACa,SAAN,EAAlB,CACA,GAAMC,CAAAA,SAAS,CAAGZ,UAAU,CAACC,MAAD,CAA5B,CACA,GAAMY,CAAAA,OAAO,CAAGD,SAAS,EAAzB,CAEA,GAAME,CAAAA,OAAO,CAAGX,UAAU,EAA1B,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,GAAMY,CAAAA,QAAQ,CAAGhB,WAAW,eAC1B;AAD0B,6EAE1B,iBAAMiB,CAAN,8IACEA,CAAC,CAACC,cAAF,GACMX,OAFR,CAEkB,QAAVA,CAAAA,OAAU,CAAAY,UAAU,QACxBX,CAAAA,YAAY,CAACY,IAAb,CAAkB,eAAlB,CAAmC,CAAED,UAAU,CAAVA,UAAF,CAAnC,CADwB,EAF5B,CAIE,GAAI,CACIE,MADJ,CACaJ,CAAC,CAACK,aAAF,CAAgBC,OAAhB,CAAwBC,KADrC,CAEIC,QAFJ,CAEeR,CAAC,CAACK,aAAF,CAAgBC,OAAhB,CAAwBG,MAFvC,CAGF,GAAID,QAAQ,GAAK,MAAjB,CAAyB,CACvBlB,OAAO,CAACc,MAAD,CAAP,CACGM,IADH,CACQ,SAAAC,MAAM,CAAI,CACdC,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACG,MAAnB,EACA,GAAIH,MAAM,CAACG,MAAP,GAAkB,GAAtB,CAA2B,CACzBC,KAAK,CAAC,iBAAD,CAAL,CACD,CAFD,IAEO,CACLjB,OAAO,CAACkB,IAAR,CAAa,WAAaZ,MAA1B,EACD,CACF,CARH,EASGa,KATH,CASS,SAAAjB,CAAC,CAAI,CACVe,KAAK,CAAC,iBAAD,CAAL,CACD,CAXH,EAYD,CAbD,IAaO,CACLA,KAAK,CAAC,eAAD,CAAL,CACD,CACF,CAAC,MAAOf,CAAP,CAAU,CACVe,KAAK,CAAC,iBAAD,CAAL,CACD,CAzBH,sDAF0B,gEA6B1B,CAACjB,OAAD,CA7B0B,CAA5B,CAgCA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA,mBACE,2BAAK,SAAS,CAAED,OAAO,CAACqB,OAAxB,eACE,oBAAC,gBAAD,MADF,cAEE,2BAAK,SAAS,CAAErB,OAAO,CAACH,SAAxB,CAAmC,GAAG,CAAEA,SAAxC,eACE,oBAAC,eAAD,MADF,cAEE,2BAAK,SAAS,CAAEG,OAAO,CAACsB,OAAxB,eACE,oBAAC,aAAD,EAAe,QAAQ,CAAEpB,QAAzB,EADF,CAFF,CAFF,CADF,CAWD,CAED,cAAeP,CAAAA,aAAf","sourcesContent":["import React, { useCallback } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport styles from \"../assets/jss/material-dashboard-react/layouts/adminStyle.js\";\nimport InfoContainer from \"./Stream/InfoContainer.js\";\nimport { useHistory } from \"react-router-dom\";\nimport SidebarContainer from \"./SidebarContainer.js\";\nimport NavbarContainer from \"./NavbarContainer.js\";\nimport { gpsInfo } from \"../lib/api/stream.js\";\nimport { accessClient } from \"../lib/api/client.js\";\n\nfunction MainContainer({ match }) {\n  const mainPanel = React.createRef();\n  const useStyles = makeStyles(styles);\n  const classes = useStyles();\n\n  const history = useHistory();\n\n  // function func2(parent_func) {\n  //   return new Promise((resolve, reject) => {\n  //       axios.get('http://www.daum.net/').then((result) => {\n  //           console.log('function2 routine**********');\n  //           console.log(parent_func);\n  //           resolve('function2에서 왔습니다.');\n  //       });\n  //   });\n  // }\n\n  const onStream = useCallback(\n    //submit\n    async e => {\n      e.preventDefault();\n      const gpsInfo = stream_key =>\n        accessClient.post(\"/stream/check\", { stream_key });\n      try {\n        const target = e.currentTarget.dataset.index;\n        const isActive = e.currentTarget.dataset.active;\n        if (isActive === \"true\") {\n          gpsInfo(target)\n            .then(result => {\n              console.log(result.status);\n              if (result.status !== 200) {\n                alert(\"잠시 후 다시 시도해주세요.\");\n              } else {\n                history.push(\"/stream/\" + target);\n              }\n            })\n            .catch(e => {\n              alert(\"잠시 후 다시 시도해주세요.\");\n            });\n        } else {\n          alert(\"스트리밍 중이 아닙니다.\");\n        }\n      } catch (e) {\n        alert(\"잠시 후 다시 시도해주세요.\");\n      }\n    },\n    [history]\n  );\n\n  // const onStream = e => {\n  //   e.preventDefault();\n\n  //   const target = e.currentTarget.dataset.index;\n  //   const isActive = e.currentTarget.dataset.active;\n  //   const test = gpsInfo(target);\n  //   console.log(test);\n\n  //   if (isActive === \"true\") {\n  //     // history.push(\"/stream/\" + target);\n  //   } else {\n\n  //   }\n  // };\n\n  return (\n    <div className={classes.wrapper}>\n      <SidebarContainer></SidebarContainer>\n      <div className={classes.mainPanel} ref={mainPanel}>\n        <NavbarContainer />\n        <div className={classes.content}>\n          <InfoContainer onStream={onStream}></InfoContainer>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default MainContainer;\n"]},"metadata":{},"sourceType":"module"}